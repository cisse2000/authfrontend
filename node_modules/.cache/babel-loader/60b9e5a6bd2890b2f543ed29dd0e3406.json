{"ast":null,"code":"import ApiService from '@/services/ApiService';\nimport FileSubmit from '../../components/FileSubmit.vue';\nexport default {\n  components: {\n    FileSubmit\n  },\n\n  created() {\n    let axiosService = new ApiService();\n    axiosService.findOne('file/crud/', this.$route.params.id).then(response => {\n      console.log(response.data);\n    }).catch(error => {\n      console.log(error.data);\n    });\n  },\n\n  name: 'UploadFile',\n  data: () => ({\n    items: [{\n      text: 'Accueil',\n      disabled: false,\n      href: {\n        name: 'home'\n      }\n    }, {\n      text: 'Profile',\n      disabled: false,\n      href: {\n        name: 'profile'\n      }\n    }, {\n      text: 'Fichier',\n      disabled: false,\n      href: {\n        name: 'addFile'\n      }\n    }],\n    document: {\n      name: '',\n      nameRules: [v => !!v || 'La description est requis', v => v && v.length <= 60 || 'la description doit être moins de 60 caractères.'],\n      file: null,\n      progress: 0\n    },\n    alert: {\n      type: 'error',\n      state: false,\n      message: ''\n    }\n  }),\n  methods: {\n    selectFile() {\n      console.log(this.document);\n    },\n\n    register() {\n      this.progress = 0;\n      this.performUpload(this.document.file, event => {\n        this.progress = Math.round(100 * event.loaded / event.total);\n      }).then(response => {\n        console.log(\"Formulaire ajouté avec succes\");\n        this.$router.push({\n          'name': 'profile'\n        });\n        this.progress = null;\n      }).catch(error => {\n        this.progress = 0;\n        console.log(\"Erreur de formulaire\");\n      });\n    },\n\n    performUpload(file, onUploadProgress) {\n      let formData = new FormData();\n      formData.append('file', file);\n      formData.append('name', this.document.name);\n      let apiAxios = new ApiService();\n      return apiAxios.addFile('/file/crud/', formData, onUploadProgress);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAwBA;AACA;AAEA;EACAA;IAAAC;EAAA,CADA;;EAEAC;IAEA;IACAC,0DACAC,IADA,CACAC;MACAC;IACA,CAHA,EAGAC,KAHA,CAGAC;MACAF;IACA,CALA;EAMA,CAXA;;EAYAG,kBAZA;EAaAC;IAEAC,QACA;MACAC,eADA;MAEAC,eAFA;MAGAC;QAAAL;MAAA;IAHA,CADA,EAMA;MACAG,eADA;MAEAC,eAFA;MAGAC;QAAAL;MAAA;IAHA,CANA,EAWA;MACAG,eADA;MAEAC,eAFA;MAGAC;QAAAL;MAAA;IAHA,CAXA,CAFA;IAoBAM;MACAN,QADA;MAEAO,YACAC,uCADA,EAEAA,8EAFA,CAFA;MAMAC,UANA;MAOAC;IAPA,CApBA;IAgCAC;MACAC,aADA;MAEAC,YAFA;MAGAC;IAHA;EAhCA,EAbA;EAoDAC;IACAC;MACAnB;IACA,CAHA;;IAKAoB;MACA;MAEA;QACA;MACA,CAFA,EAGAtB,IAHA,CAGAC;QACAC;QACA;UAAA;QAAA;QACA;MACA,CAPA,EAQAC,KARA,CAQAC;QACA;QACAF;MACA,CAXA;IAYA,CApBA;;IAsBAqB;MACA;MACAC;MACAA;MAEA;MAEA;IAEA;;EA/BA;AApDA","names":["components","FileSubmit","created","axiosService","then","response","console","catch","error","name","data","items","text","disabled","href","document","nameRules","v","file","progress","alert","type","state","message","methods","selectFile","register","performUpload","formData"],"sourceRoot":"src/views/files","sources":["EditFileView.vue"],"sourcesContent":["<template>\n    <div id=\"file\">\n        <v-container>\n            \n            <router-link color=\"\" :to=\"{name: 'listFile'}\">List de fichier</router-link>\n            \n            <template>\n                <div>\n                    <v-breadcrumbs :items=\"items\">\n                    <template v-slot:divider>\n                        <v-icon>mdi-chevron-right</v-icon>\n                    </template>\n                    </v-breadcrumbs>\n                </div>\n            </template>\n            \n    \n            <FileSubmit title=\"Modification des fichiers\" btnSubmit=\"Modifier\" />\n           \n        </v-container>\n    </div>\n</template>\n\n<script>\nimport ApiService from '@/services/ApiService'\nimport FileSubmit from '../../components/FileSubmit.vue'\n\n    export default {\n    components: { FileSubmit },\n        created(){\n            \n            let axiosService = new ApiService()\n            axiosService.findOne('file/crud/', this.$route.params.id)\n            .then(response => {\n                console.log(response.data)\n            }).catch(error => {\n                console.log(error.data)\n            })\n        },\n        name: 'UploadFile',\n        data:() => ({\n        \n            items: [\n                {\n                    text: 'Accueil',\n                    disabled: false,\n                    href: {name: 'home'},\n                },\n                {\n                    text: 'Profile',\n                    disabled: false,\n                    href: {name: 'profile'},\n                },\n                {\n                    text: 'Fichier',\n                    disabled: false,\n                    href: {name: 'addFile'},\n                },\n            ],\n\n            document: {\n              name: '',\n              nameRules: [\n                v => !!v || 'La description est requis',\n                v => (v && v.length <= 60) || 'la description doit être moins de 60 caractères.',\n              ],\n              file:null,\n              progress:0\n\n              \n            },\n\n            alert: {\n              type: 'error',\n              state: false,\n              message: ''\n            }\n        }),\n\n        methods: {\n            selectFile(){\n                console.log(this.document)\n            },\n            \n            register(){\n                this.progress = 0\n\n                this.performUpload(this.document.file, event => {\n                    this.progress = Math.round((100 * event.loaded) / event.total)\n                })\n                .then(response => {\n                    console.log(\"Formulaire ajouté avec succes\")\n                    this.$router.push({'name': 'profile'})\n                    this.progress = null\n                })\n                .catch(error => {\n                    this.progress = 0 \n                    console.log(\"Erreur de formulaire\")\n                })    \n            },\n\n            performUpload(file, onUploadProgress){\n                let formData = new FormData()\n                formData.append('file', file)\n                formData.append('name', this.document.name)\n\n                let apiAxios = new ApiService()\n\n                return apiAxios.addFile('/file/crud/', formData, onUploadProgress)\n\n            }\n        }\n        \n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}