{"ast":null,"code":"import ApiService from '@/services/ApiService';\nexport default {\n  name: 'InputFile',\n  props: {\n    title: String,\n    btnSubmit: String,\n    data: Object\n  },\n  data: () => ({\n    valid: true,\n    document: {\n      name: '',\n      nameRules: [v => !!v || 'La description est requis', v => v && v.length <= 60 || 'la description doit être moins de 60 caractères.'],\n      file: null,\n      progress: 0\n    },\n    alert: {\n      type: 'error',\n      state: false,\n      message: ''\n    }\n  }),\n  methods: {\n    selectFile() {\n      console.log(this.document);\n    },\n\n    register() {\n      this.progress = 0;\n      this.performUpload(this.document.file, event => {\n        this.progress = Math.round(100 * event.loaded / event.total);\n      }).then(response => {\n        console.log(\"Formulaire ajouté avec succes\");\n        this.$router.push({\n          'name': 'profile'\n        });\n        this.progress = null;\n      }).catch(error => {\n        this.progress = 0;\n        console.log(\"Erreur de formulaire\");\n      });\n    },\n\n    performUpload(file, onUploadProgress) {\n      let formData = new FormData();\n      formData.append('file', file);\n      formData.append('name', this.document.name);\n      let apiAxios = new ApiService();\n      return apiAxios.addForm('/file/crud/', formData, onUploadProgress);\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA2DA;AAEA;EACAA,iBADA;EAEAC;IACAC,aADA;IAEAC,iBAFA;IAGAC;EAHA,CAFA;EAOAA;IACAC,WADA;IAGAC;MACAN,QADA;MAEAO,YACAC,uCADA,EAEAA,8EAFA,CAFA;MAMAC,UANA;MAOAC;IAPA,CAHA;IAeAC;MACAC,aADA;MAEAC,YAFA;MAGAC;IAHA;EAfA,EAPA;EA6BAC;IACAC;MACAC;IACA,CAHA;;IAKAC;MACA;MAEA;QACA;MACA,CAFA,EAGAC,IAHA,CAGAC;QACAH;QACA;UAAA;QAAA;QACA;MACA,CAPA,EAQAI,KARA,CAQAC;QACA;QACAL;MACA,CAXA;IAYA,CApBA;;IAsBAM;MACA;MACAC;MACAA;MAEA;MAEA;IAEA;;EA/BA;AA7BA","names":["name","props","title","btnSubmit","data","valid","document","nameRules","v","file","progress","alert","type","state","message","methods","selectFile","console","register","then","response","catch","error","performUpload","formData"],"sourceRoot":"src/components","sources":["FileSubmit.vue"],"sourcesContent":["<template>\n    <div id=\"file\">\n        <v-row class=\"d-flex justify-content\">\n                <v-col cols=\"12\" md=\"6\" >\n                    <v-card class=\"pa-6\">\n                        <h1>{{title}}</h1>\n                        <template>\n\n                            <v-form\n                                ref=\"form\"\n                                v-model=\"valid\"\n                                lazy-validation\n                            >\n\n\n                                <div class=\"mb-3\">\n\n                                    <v-text-field\n                                    v-model=\"document.name\"\n                                    :rules=\"document.nameRules\"\n                                    label=\"Description de fichier\"\n                                    required\n                                    ></v-text-field>\n                                </div>                            \n\n                                \n                                 <v-file-input\n                                    counter\n                                    v-model=\"document.file\"\n                                    show-size\n                                    truncate-length=\"36\"\n                                    label=\"Fichier(s)\"\n                                    @change=\"selectFile\"\n                                ></v-file-input>\n\n                                <div class=\"progress mb-6\">\n                                    <progress class=\"is-primary progress\" :value=document.progress max=\"100\">{{document.progress}}%</progress>\n                                </div>\n                                \n                                <v-btn\n                                :disabled=\"!valid\"\n                                color=\"success\"\n                                class=\"mr-4\"\n                                @click=\"register\"\n                                >\n                                {{btnSubmit}}\n                                </v-btn>\n\n                                <div class=\"notification mt-6\"> Le message</div>\n                                \n                            </v-form>\n                        </template>\n                    </v-card>\n                </v-col>\n        </v-row>\n    </div>\n</template>\n\n<script>\nimport ApiService from '@/services/ApiService'\n\n    export default {\n        name: 'InputFile',\n        props: {\n            title: String,\n            btnSubmit: String,\n            data: Object\n        },\n        data:() => ({\n            valid: true,\n                \n            document: {\n                name: '',\n                nameRules: [\n                v => !!v || 'La description est requis',\n                v => (v && v.length <= 60) || 'la description doit être moins de 60 caractères.',\n                ],\n                file:null,\n                progress:0\n\n                \n            },\n\n            alert: {\n                type: 'error',\n                state: false,\n                message: ''\n            }\n        }),\n\n        methods: {\n            selectFile(){\n                console.log(this.document)\n            },\n            \n            register(){\n                this.progress = 0\n\n                this.performUpload(this.document.file, event => {\n                    this.progress = Math.round((100 * event.loaded) / event.total)\n                })\n                .then(response => {\n                    console.log(\"Formulaire ajouté avec succes\")\n                    this.$router.push({'name': 'profile'})\n                    this.progress = null\n                })\n                .catch(error => {\n                    this.progress = 0 \n                    console.log(\"Erreur de formulaire\")\n                })    \n            },\n\n            performUpload(file, onUploadProgress){\n                let formData = new FormData()\n                formData.append('file', file)\n                formData.append('name', this.document.name)\n\n                let apiAxios = new ApiService()\n\n                return apiAxios.addForm('/file/crud/', formData, onUploadProgress)\n\n            }\n        }\n        \n    }\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>"]},"metadata":{},"sourceType":"module"}